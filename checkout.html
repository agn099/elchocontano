<!DOCTYPE html>
<html lang="en">
  <head>
    <title>El Chocontano - Restaurante Y Piqueteadero</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Great+Vibes" rel="stylesheet">
    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/ionicons.min.css">
    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/otros.css">
    <link rel="stylesheet" href="estilos.css">
    <link rel="icon" type="image/x-icon" href="images/oveja.png">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
   </head>
<body>

<!-- Inicio nav-->
<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
  <div class="container">
    <div id="logo">
      <a href="index.html">
        <img src="images/logo.png" alt="logo" class="logo">
      </a>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
      aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="oi oi-menu"></span> Menu
    </button>
    <div class="collapse navbar-collapse" id="ftco-nav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item "><a href="index.html" class="nav-link">Inicio</a></li>
        <li class="nav-item "><a href="menu.html" class="nav-link">Menu</a></li>
        <li class="nav-item"><a href="services.html" class="nav-link">Servicios</a></li>
        <li class="nav-item"><a href="about.html" class="nav-link">Historia</a></li>
        <!-- Items sin uso 
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="room.html" id="dropdown04" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Tienda</a>
            <div class="dropdown-menu" aria-labelledby="dropdown04">
              <a class="dropdown-item" href="shop.html">Tienda </a>
              <a class="dropdown-item" href="product-single.html">Producto</a>
              <a class="dropdown-item" href="cart.html">Carrito</a>
              <a class="dropdown-item" href="checkout.html">Cancelar</a>
                  </div>
      </li>
      -->
        <li class="nav-item"><a href="contact.html" class="nav-link">Cont√°ctanos</a></li>
        <li class="nav-item cart "><a href="cart.html" class="nav-link"><span
              class="icon icon-shopping_cart"></span><span
              class="bag d-flex justify-content-center align-items-center"><small>0</small></span></a></li>
      </ul>
    </div>
  </div>
</nav>
<!-- fin nav -->
  
<!-- Inicio Slider -->
<section class="home-slider owl-carousel slider-recorte">
  <div class="slider-item" style="background-image: url(images/bg_5.jpg);" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container contenedor-slider">
      <div class="row slider-text justify-content-center align-items-center">
        <div class="col-md-7 col-sm-12 text-center ftco-animate">
          <h1 class="mb-3 mt-5 bread">COMPRAR</h1>
          <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Inicio</a></span> <span>Comprar</span></p>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- fin Slider -->

<!-- Inicio Detalles de facturaci√≥n -->
<section class="ftco-section">
  <div class="container">
    <div class="row">
      <div class=" ftco-animate">
        <form action="#" class="billing-form ftco-bg-dark p-5 p-md-5">
          <h3 class="mb-4 billing-heading">DETALLES DE FACTURACI√ìN</h3>
          <div class="row align-items-end">
            <div class="col-md-6">
              <div class="form-group">
                <label for="name">Nombre completo*</label>
                <input id="name" type="text" class="form-control" placeholder="">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="email">Correo electr√≥nico*</label>
                <input id="email" type="email" class="form-control" placeholder="">
              </div>
            </div>
            <div class="w-100"></div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="address">Direcci√≥n*</label>
                <input id="address" type="text" class="form-control" placeholder="Direcci√≥n e indicaciones">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="apartment">Apartamento, Suite, etc: (opcional)</label>
                <input id="apartment" type="text" class="form-control" placeholder="">
              </div>
            </div>
            <div class="w-100"></div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="city">Barrio*</label>
                <input id="city" type="text" class="form-control" placeholder="">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="cedula">C√©dula*</label>
                <input id="cedula" type="number" class="form-control" placeholder="">
              </div>
            </div>
            <div class="w-100"></div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="phone">Tel√©fono*</label>
                <input id="phone" type="number" class="form-control" placeholder="">
              </div>
            </div>
            <div class="form-group parrafo-pago contenedor-pago">
              <label style="font-weight: bold;">ELIGE UN M√âTODO DE PAGO:</label>
               <p  style="font-size: 14px; color: #ffffff;">
                <span class="titulo-pago-egrita">‚úÖ Paso 1: VERIFICACI√ìN DEL PEDIDO</span><br>
                    Es importante confirmar que todos los platos est√©n disponibles. Ante cualquier duda, puede comunicarse al n√∫mero <strong>322-215-5562</strong>.

                    <br><br>
                    <span class="titulo-pago-egrita">‚úÖ Paso 2: PAGO R√ÅPIDO </span><br>
                    Haz la transferencia al n√∫mero <strong>322-215-5562</strong> mediante Nequi o Daviplata.
                    <br><br>
                    <span class="titulo-pago-egrita">‚úÖ Paso 3: CONFIRMACI√ìN </span><br>
                    Seleccione la opci√≥n REALIZAR PEDIDO üëá para finalizar la compra. Se enviar√° un correo con el resumen del pedido y se confirmar√° que el pago ha sido recibido.
                    <br><br>
                    <span class="titulo-pago-egrita">‚úÖ Paso 4: ENTREGA </span><br>
                    Una vez completada la compra, se coordinar√° directamente la forma de env√≠o del pedido, ya sea por la plataforma de preferencia.<br><strong>El costo del env√≠o se paga por separado.</strong>
            </div>
          </div>
        </form>

        <div style=" margin: 0% !important;" class="row mt-5 pt-3 d-flex">
          <div class="col-md-6 d-flex">
            <div class="cart-detail cart-total ftco-bg-dark p-3 p-md-4">
              <h3 class="billing-heading mb-4">total del carrito</h3>
              <p class="d-flex total-price">
                <span>Total</span>
                <span id="cartTotalDisplay">$0</span>
              </p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="cart-detail ftco-bg-dark p-3 p-md-4">
              <h3 class="billing-heading mb-4">REALIZAR PEDIDO</h3>
              <div class="form-group">
                <div class="col-md-12">
                  
                </div>
              </div>
              <div class="form-group">
                <div class="col-md-12">
                  <div class="checkbox">
                    <label><input type="checkbox" value="" class="mr-2"> He le√≠do y acepto los t√©rminos y condiciones</label>
                  </div>
                </div>
              </div>
              <p><button id="placeOrderBtn" type="button" class="btn btn-primary py-3 px-4">REALIZAR PEDIDO</button></p>
            </div>
          </div>
        </div>
      </div> <!-- .col-md-8 -->
    </div>
  </div>
</section>
<!-- Fin Detalles de facturaci√≥n -->

<!-- Inicio Footer -->
<footer style="background-color: #120f0f;">
  <section class="ftco-intro ">
    <div class="container-wrap contenedor">
      <div class="wrap d-md-flex align-items-xl-end">
        <div class="info">
          <div class="row no-gutters">
            <div class="col-md-4 d-flex ftco-animate padding-bloque">
              <div class="icon"><span class="icon-whatsapp"></span></div>
              <div class="text ">
                <h3>+(57) 322 215 5562</h3>
                <p>Escribenos de una, te atenderemos en bombas.</p>
              </div>
            </div>
            <div class="col-md-4 d-flex ftco-animate  padding-bloque">
              <div class="icon"><span class="icon-phone"></span></div>
              <div class="text">
                <h3>322 215 5562</h3>
                <p> Llamanos y pide lo que quieras.</p>
              </div>
            </div>
            <div class="col-md-4 d-flex ftco-animate  padding-bloque">
              <div class="icon"><span class="icon-my_location"></span></div>
              <div class="text">
                <h3>Cra 14 # 74 c Sur 17</h3>
                <p>Frente al banco caja social de santa librada.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <div class="col-md-12 text-center padding-espaciado">
    <p>Copyright ¬©2024 Todos los derechos reservados, esta plantilla fue desarrollada por @GrupoAlfaCreativos.
    </p>
  </div>
</footer>

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/jquery.timepicker.min.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="js/google-map.js"></script>
  <script src="js/main.js"></script>
 <script src="js/cart.js"></script>
 <script src="js/checkout.js"></script>
 <script src="js/pago.js"></script>



<!-- EmailJS SDK -->
 <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js">
</script>
<script type="text/javascript">
   (function(){
      emailjs.init({
        publicKey: "35_rhcCuw1mpi1FsM" // Tu Public Key
      
      
    // Mostrar total del carrito
    const cart = JSON.parse(localStorage.getItem('cart') || '[]'),
    const total = cart.reduce((sum, p) => sum + (p.price || 0) * (p.qty || 1), 0),
    $('#cartTotalDisplay').text(`$${total.toLocaleString()}`)
    console.log('Total calculado:', total);

    // Env√≠o del pedido
    $('#placeOrderBtn').on('click', function(e){
      e.preventDefault();
      console.log('Bot√≥n REALIZAR PEDIDO fue clickeado');

      // Captura de datos del formulario con IDs alineados a EmailJS
      const name      = $('#name').val().trim();
      const email     = $('#email').val().trim();
      const phone     = $('#phone').val().trim();
      const address   = $('#address').val().trim();
      const apartment = $('#apartment').val().trim();
      const city      = $('#city').val().trim();
      const cedula    = $('#cedula').val().trim();


      if(!name || !email || !phone || !address || !city){
        alert('Por favor completa todos los campos obligatorios.');
        return;
      }

      if(cart.length === 0){
        alert('Tu carrito est√° vac√≠o.');
        return;
      }

      // Generar resumen HTML de productos
      const resumenHTML = cart.map(p => `
        <tr>
          <td>${p.qty} x ${p.name}</td>
          <td>$${(p.price * p.qty).toLocaleString()}</td>
        </tr>
      `).join('');

      const shipping = 0;
      const orderId = 'ORD-' + Date.now();
      const image_url = cart[0]?.image || 'cordero.jpg'; // opcional si usas imagen

      const emailData = {
        order_id: orderId,
        name: name,
        email: email,
        phone: phone,
        address: `${address}, ${apartment}, Barrio ${city}`,
        cedula: cedula,
        resumen: resumenHTML,
        shipping: `$${shipping.toLocaleString()}`,
        units: cart.reduce((sum, p) => sum + p.qty, 0),
        price: total.toLocaleString(),
        total: `$${total.toLocaleString()}`,
        image_url: image_url
      };

      // Enviar al cliente
      emailjs.send('service_7j1nq3j', 'template_mfq6nfp', emailData)
        .then(function(response) {
          console.log('Correo al cliente enviado:', response.status);
        }, function(error) {
          console.error('Error al enviar al cliente:', error);
        });

      // Enviar copia al restaurante
      emailjs.send('service_7j1nq3j', 'template_mfq6nfp', {
        ...emailData,
        email: 'elchocontano@gmail.com'
      })
      .then(function(response) {
        console.log('Copia al restaurante enviada:', response.status);
        alert('¬°Pedido enviado con √©xito! Revisa tu correo.');
        localStorage.removeItem('cart');
        window.location.href = 'index.html';
      }, function(error) {
        console.error('Error al enviar al restaurante:', error);
        alert('Hubo un problema al enviar tu pedido. Intenta de nuevo.');
      });
    });
  
      
      });
   })();
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    emailjs.init('35_rhcCuw1mpi1FsM'); // Tu Public Key

    // Mostrar total del carrito
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const total = cart.reduce((sum, p) => sum + (p.price || 0) * (p.qty || 1), 0);
    $('#cartTotalDisplay').text(`$${total.toLocaleString()}`);
    console.log('Total calculado:', total);

    // Env√≠o del pedido
    $('#placeOrderBtn').on('click', function(e){
      e.preventDefault();
      console.log('Bot√≥n REALIZAR PEDIDO fue clickeado');

      // Captura de datos del formulario con IDs alineados a EmailJS
      const name      = $('#name').val().trim();
      const email     = $('#email').val().trim();
      const phone     = $('#phone').val().trim();
      const address   = $('#address').val().trim();
      const apartment = $('#apartment').val().trim();
      const city      = $('#city').val().trim();
      const cedula    = $('#cedula').val().trim();

      if(!name || !email || !phone || !address || !city){
        alert('Por favor completa todos los campos obligatorios.');
        return;
      }

      if(cart.length === 0){
        alert('Tu carrito est√° vac√≠o.');
        return;
      }

      // Generar resumen HTML de productos
      const resumenHTML = cart.map(p => `
        <tr>
          <td>${p.qty} x ${p.name}</td>
          <td>$${(p.price * p.qty).toLocaleString()}</td>
        </tr>
      `).join('');

      const shipping = 0;
      const orderId = 'ORD-' + Date.now();
      const image_url = cart[0]?.image || 'cordero.jpg'; // opcional si usas imagen

      const emailData = {
        order_id: orderId,
        name: name,
        email: email,
        phone: phone,
        address: `${address}, ${apartment}, Barrio ${city}`,
        cedula: cedula,
        resumen: resumenHTML,
        shipping: `$${shipping.toLocaleString()}`,
        units: cart.reduce((sum, p) => sum + p.qty, 0),
        price: total.toLocaleString(),
        total: `$${total.toLocaleString()}`,
        image_url: image_url
      };

      // Enviar al cliente
      emailjs.send('service_7j1nq3j', 'template_mfq6nfp', emailData)
        .then(function(response) {
          console.log('Correo al cliente enviado:', response.status);
        }, function(error) {
          console.error('Error al enviar al cliente:', error);
        });

      // Enviar copia al restaurante
      emailjs.send('service_7j1nq3j', 'template_mfq6nfp', {
        ...emailData,
        email: 'elchocontano@gmail.com'
      })
      .then(function(response) {
        console.log('Copia al restaurante enviada:', response.status);
        alert('¬°Pedido enviado con √©xito! Revisa tu correo.');
        localStorage.removeItem('cart');
        window.location.href = 'index.html';
      }, function(error) {
        console.error('Error al enviar al restaurante:', error);
        alert('Hubo un problema al enviar tu pedido. Intenta de nuevo.');
      });
    });
  });
</script>
<!-- WhatsApp Button -->
  <a href="https://api.whatsapp.com/send?phone=573222155562&text=Buen%20d√≠a%20üëã,%20¬øhablo%20con%20el%20Restaurante%20El%20Chocontano?"
   class="whatsapp-button" target="_blank">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" style="width:60px;">
</a>

    </body>
</html>


